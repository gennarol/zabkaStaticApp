@inherits LayoutComponentBase
@inject IJSRuntime JS
@inject Blazored.SessionStorage.ISessionStorageService sessionStorage
@inject NavigationManager NavManager

<nav id="navigation" class="navigation">
    <div class="navigation__bg"></div>
    <div class="navigation__bar">
        <div class="navigation__with-submenu" data-submenu="">
            <input class="navigation__trigger" type="checkbox" id="navigationMenuTrigger" data-submenu-trigger="">
            <label class="navigation__button navigation-button -primary" title="Menu" for="navigationMenuTrigger">
                <span class="navigation-button__icon">
                    <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <rect class="menu-icon__1" y="2" width="20" height="3"></rect>
                        <rect class="menu-icon__2" y="8" width="20" height="3"></rect>
                        <rect class="menu-icon__3" y="8" width="20" height="3"></rect>
                        <rect class="menu-icon__4" y="14" width="20" height="3"></rect>
                    </svg>

                </span>
                <span class="navigation-button__text">
                    Menu
                </span>
            </label>
            <div class="navigation__submenu -left">
                <div class="navigation__submenu-content" data-submenu-content="">
                    <div class="navigation-section -primary">

                        <ul class="navigation-section__items -primary">
                            <li class="navigation-section__item">
                                <a class="navigation-section__link -primary" href="/" title="">OK</a>
                            </li>
                            <li class="navigation-section__item">
                                <a class="navigation-section__link -primary" href="/" title="">Cancel Operation</a>
                            </li>
                        </ul>
                    </div>
                    <div class="navigation-scroll-helper -show" data-submenu-helper="">
                        <svg><use xlink:href="#icon-peak-down"></use></svg>
                        <svg><use xlink:href="#icon-peak-down"></use></svg>
                        <svg><use xlink:href="#icon-peak-down"></use></svg>
                    </div>
                </div>
            </div>
            <label class="navigation__overlay" for="navigationMenuTrigger">&nbsp;</label>
        </div>

        <a class="navigation__logo" href="/">
            <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 77 31">
                <title>Żabka</title>
                <path d="M13.2,25.2l0.6-3.1c9.8,6.2,22.4,6.2,32.2,0l0.6,3.1C36.8,32.9,23,32.9,13.2,25.2z M52,10.9c1.1,0.2,2.3,0.1,3.3-0.5
	c0.8-0.5,1.3-1.3,1.5-2.2c0.2-0.9,0.3-1.7,0.4-2.6H61C61,6,61,6.5,61,7c-0.1,1.2-0.4,2.3-0.9,3.3c-0.4,0.8-1.1,1.5-1.8,2
	c-0.2,0.1-0.4,0.3-0.6,0.4c0.2,0.3,0.4,0.7,0.5,1c1,1.8,2,3.5,3.1,5.3c0.1,0.2,0.2,0.4,0.3,0.6c0.1,0.2,0.1,0.4,0.1,0.6h-4.2l-3.3-6
	L52,14.4v5.9h-4.1V0.5H52L52,10.9L52,10.9z M12.2,5.5c0,0.2-0.1,0.4-0.2,0.7c-0.7,1.2-1.4,2.4-2.1,3.6c-1.3,2.2-2.6,4.4-3.8,6.6
	c0,0.1-0.1,0.2-0.1,0.3c1.1,0,2.1,0,3.1,0s2,0,3.1,0v3.6H0c0-0.2,0.1-0.4,0.2-0.6c0.6-1.1,1.2-2.1,1.8-3.1c0.6-1,1.1-1.9,1.7-2.9
	c0.8-1.4,1.6-2.8,2.4-4.1c0.1-0.1,0.1-0.2,0.2-0.4c-0.5,0-1,0-1.5,0s-1,0-1.4,0H0.5V5.5L12.2,5.5L12.2,5.5z M6.5,4.1
	C5.9,4.2,5.4,4,5,3.6C4.4,3.1,4.1,2.2,4.4,1.4C4.6,0.7,5.3,0.1,6.1,0c0.7-0.2,1.5,0.1,2,0.6C8.7,1.2,8.8,2,8.6,2.8
	C8.3,3.6,7.6,4.1,6.8,4.1C6.7,4.2,6.6,4.2,6.5,4.1L6.5,4.1z M45,10.1c-0.4-1.4-1.2-2.7-2.4-3.6c-1.1-0.8-2.3-1.2-3.6-1.2
	c-1.1-0.1-2.3,0.1-3.4,0.5c-0.1,0-0.3,0.1-0.4,0.1V0.5h-4.1v18.9c0.6,0.2,1.2,0.3,1.8,0.4c1,0.3,2,0.5,3.1,0.7
	c1.6,0.2,3.2,0,4.8-0.5c2.4-0.7,4.2-2.7,4.5-5.2C45.5,13.3,45.5,11.6,45,10.1z M41.1,15c-0.3,1-1.1,1.8-2.1,2
	c-1.2,0.3-2.5,0.2-3.6-0.2c0,0-0.1,0-0.1-0.1V9.4c1.4-1,3.3-1,4.7-0.1c0.5,0.4,0.8,0.9,1,1.5C41.4,12.1,41.5,13.6,41.1,15L41.1,15z
	 M27.3,6.5c-1-0.4-2.1-0.7-3.2-0.9c-1.5-0.3-3-0.4-4.5-0.3C18.3,5.4,17,6,16,7c-0.9,1-1.6,2.2-1.8,3.5c-0.2,1-0.3,2-0.3,3
	c0,1.3,0.3,2.5,0.9,3.6c0.5,0.9,1.2,1.7,2.1,2.2c2,1.1,4.3,1.5,6.5,1.1c1.6-0.2,3.1-0.7,4.7-1V6.9C27.9,6.8,27.6,6.6,27.3,6.5z
	 M24.1,16.8c-1.4,0.5-2.9,0.6-4.3,0c-0.7-0.3-1.2-0.8-1.5-1.6c-0.5-1.6-0.5-3.2,0.1-4.8c0.4-1,1.4-1.7,2.4-1.8c1-0.1,2.1,0,3,0.5
	c0.1,0,0.1,0.1,0.2,0.1L24.1,16.8L24.1,16.8z M75.6,6.3c-1.2-0.4-2.4-0.7-3.7-0.9c-1.2-0.2-2.5-0.2-3.8,0c-2.3,0.4-4.1,2.1-4.8,4.3
	c-0.5,1.7-0.7,3.5-0.4,5.3c0.2,1.6,1,3.1,2.3,4.1c0.3,0.2,0.7,0.5,1,0.6c0.8,0.4,1.8,0.7,2.7,0.8c1.1,0.2,2.2,0.2,3.3,0
	c1.6-0.3,3.2-0.7,4.7-1V6.9C76.5,6.7,76.1,6.5,75.6,6.3L75.6,6.3z M73,16.8c-0.2,0.1-0.3,0.1-0.5,0.1c-0.8,0.2-1.6,0.3-2.5,0.3
	c-1,0-1.9-0.5-2.5-1.3c-0.3-0.4-0.5-0.9-0.6-1.4c-0.2-1.2-0.2-2.4,0.2-3.6c0.3-1.2,1.4-2.1,2.6-2.2c1.1-0.2,2.2,0,3.2,0.6L73,16.8
	L73,16.8z"></path>
            </svg>
        </a>

        <div class="navigation__right">
            <div class="navigation__right-outer">
                <div class="navigation__right-inner -hide -show-lg-flex">
                    <a class="navigation__button navigation-button" href="/produkty/glodny" title="">
                        <span class="navigation-button__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                <title>Customer Information</title>
                                <path d="M19.5 20H.5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h.9c.2-4.3 3.7-7.8 8-8v-1h-.7c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h2.6c.3 0 .5.2.5.5s-.2.5-.5.5h-.8v.9c4.3.3 7.8 3.7 8 8h1c.3 0 .5.3.5.5 0 .3-.3.5-.5.6zM9.4 12.6c-1.8 0-3.5.8-4.6 2.3-.1.2-.1.4.1.5 0 .1.1.1.1.1.1 0 .2-.1.3-.1 1-1.3 2.5-2 4-2 .2 0 .4-.2.4-.4.1-.2-.1-.4-.3-.4zm6.7-5.2c-.4.5-.4 1.1 0 1.6l.7.8c.2.2.2.5 0 .7-.2.2-.5.2-.7 0l-.7-.8c-.7-.8-.8-2.1 0-2.9l1.2-1.4c.4-.5.4-1.2-.1-1.6l-.9-.8c-.2-.2-.2-.5 0-.7s.5-.2.7 0l.8.7c.9.8.9 2.1.2 3l-1.2 1.4zM9.8 4.3c-.3.3-.3.8 0 1.1l.6.6c.2.2.2.5 0 .7-.2.2-.5.2-.7 0l-.6-.6c-.6-.7-.6-1.7-.1-2.4l1-1.1c.3-.3.3-.8-.1-1.1L9.3.9c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l.6.6c.7.7.8 1.8.2 2.5l-1 1zM3.4 7.4C3 7.9 3 8.5 3.4 9l.7.8c.2.2.2.5 0 .7-.2.2-.5.2-.7 0l-.8-.8c-.7-.8-.8-2.1 0-2.9l1.2-1.4c.4-.5.4-1.2-.1-1.6L2.9 3c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l.7.7c.9.8.9 2.1.2 3L3.4 7.4z"></path>
                            </svg>
                        </span>
                        <span class="navigation-button__text">
                            Customer Information
                        </span>
                    </a>
                    <a class="navigation__button navigation-button" href="/produkty/spragniony" title="">
                        <span class="navigation-button__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                <title>Bill Sender</title>
                                <path d="M9.4 5h1.2L7.4.2C7.3 0 7-.1 6.8 0L.7 2.6c-.2.2-.3.5-.2.7.1.3.4.4.7.2l5.7-2.4L9.4 5z"></path>
                                <path d="M16 6H4c-.3 0-.6.2-.6.6v.7c0 .4.3.7.6.7h.4l1.7 11.1c0 .5.4.8.8.9h6.2c.5 0 .8-.4.8-.9L15.6 8h.4c.4 0 .6-.3.6-.6v-.8c0-.4-.3-.6-.6-.6zm-1.5 3c-.1 0-.1 0 0 0H5.6l-.2-1h9.2l-.1 1z"></path>
                            </svg>
                        </span>
                        <span class="navigation-button__text">
                            Bill receiver
                        </span>
                    </a>
                    <a class="navigation__button navigation-button" href="/gazetka-promocyjna#gazetka" title="">
                        <span class="navigation-button__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20">
                                <title>Bill information</title>
                                <path d="M9.5,2.1L1.1,0C1,0,0.8,0,0.7,0.1C0.6,0.2,0.5,0.4,0.5,0.5v16.9c0,0.2,0.2,0.4,0.4,0.5L9.5,20V2.1z M7.8,17.9l-5.6-1.5
		v-1.1l5.6,1.5V17.9z M7.8,15.3l-5.6-1.5v-1.1l5.6,1.5V15.3z M7.8,12.7l-5.6-1.5v-1.1l5.6,1.5V12.7z M7.8,10.1L2.2,8.6V7.5l5.6,1.5
		V10.1z M7.8,7.4L2.2,6V4.9l5.6,1.5V7.4z M2.2,3.4V2.3l5.6,1.5v1.1L2.2,3.4z"></path>
                                <polygon points="17.4,3.3 11.7,4.8 11.7,11 17.4,9.6 	"></polygon>
                                <path d="M19.3,0.1C19.2,0,19,0,18.9,0l-8.4,2.1v1l8-2v12.4l-3,0.7c-0.2,0.1-0.4,0.3-0.4,0.5v3L10.5,19v1l5.2-1.3c0,0,0,0,0,0
		c0.1,0,0.2-0.1,0.2-0.1c0,0,0,0,0,0l3.4-4.2c0,0,0,0,0-0.1c0-0.1,0.1-0.1,0.1-0.2c0,0,0,0,0,0V0.5C19.5,0.4,19.4,0.2,19.3,0.1z
		M16.1,16.8v-1.6l1.6-0.4L16.1,16.8z"></path>
                            </svg>
                        </span>
                        <span class="navigation-button__text">
                            Bill Information
                        </span>
                    </a>
                    <a class="navigation__button navigation-button" href="@loginLogut" title="">
                        <span class="navigation-button__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 153.07 153.07">
                                <title>Aplikacja</title>
                                <circle cx="76.54" cy="76.54" r="76.54" fill="#0d6534"></circle>
                                <path fill="#fff" fill-rule="evenodd" d="M76.86 128.25a73.94 73.94 0 0 0 44.46-14.8l-1.73-9.26a82.25 82.25 0 0 1-85.46 0l-1.73 9.25a73.89 73.89 0 0 0 44.46 14.81z" transform="translate(-.32 .43)"></path>
                                <path fill="#fff" d="M71.19 27.94c0-4.91 3.81-8.07 8.5-8.07 4.9 0 8.71 3.16 8.71 8.07s-3.81 7.84-8.71 7.84c-4.69 0-8.5-3.05-8.5-7.84" class="cls-3" transform="translate(-.32 .43)"></path>
                                <path fill="#fff" d="M101.68 42.81L77.52 82.5h24.16v13.92h-47.4v-1.84l24.51-40.27H56.01V40.97h45.67v1.84z" class="cls-3"></path>
                            </svg>
                        </span>
                        <span class="navigation-button__text">
                            @output
                        </span>
                    </a>                    
                </div>
                <div class="navigation__right-inner -hide-lg">
                    <a class="navigation__button navigation-button" href="/produkty/glodny" title="">
                        <span class="navigation-button__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                <title>Głodny</title>
                                <path d="M19.5 20H.5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h.9c.2-4.3 3.7-7.8 8-8v-1h-.7c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h2.6c.3 0 .5.2.5.5s-.2.5-.5.5h-.8v.9c4.3.3 7.8 3.7 8 8h1c.3 0 .5.3.5.5 0 .3-.3.5-.5.6zM9.4 12.6c-1.8 0-3.5.8-4.6 2.3-.1.2-.1.4.1.5 0 .1.1.1.1.1.1 0 .2-.1.3-.1 1-1.3 2.5-2 4-2 .2 0 .4-.2.4-.4.1-.2-.1-.4-.3-.4zm6.7-5.2c-.4.5-.4 1.1 0 1.6l.7.8c.2.2.2.5 0 .7-.2.2-.5.2-.7 0l-.7-.8c-.7-.8-.8-2.1 0-2.9l1.2-1.4c.4-.5.4-1.2-.1-1.6l-.9-.8c-.2-.2-.2-.5 0-.7s.5-.2.7 0l.8.7c.9.8.9 2.1.2 3l-1.2 1.4zM9.8 4.3c-.3.3-.3.8 0 1.1l.6.6c.2.2.2.5 0 .7-.2.2-.5.2-.7 0l-.6-.6c-.6-.7-.6-1.7-.1-2.4l1-1.1c.3-.3.3-.8-.1-1.1L9.3.9c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l.6.6c.7.7.8 1.8.2 2.5l-1 1zM3.4 7.4C3 7.9 3 8.5 3.4 9l.7.8c.2.2.2.5 0 .7-.2.2-.5.2-.7 0l-.8-.8c-.7-.8-.8-2.1 0-2.9l1.2-1.4c.4-.5.4-1.2-.1-1.6L2.9 3c-.2-.2-.2-.5 0-.7.2-.2.5-.2.7 0l.7.7c.9.8.9 2.1.2 3L3.4 7.4z"></path>
                            </svg>
                        </span>
                    </a>
                    <a class="navigation__button navigation-button" href="/produkty/spragniony" title="">
                        <span class="navigation-button__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                <title>Spragniony</title>
                                <path d="M9.4 5h1.2L7.4.2C7.3 0 7-.1 6.8 0L.7 2.6c-.2.2-.3.5-.2.7.1.3.4.4.7.2l5.7-2.4L9.4 5z"></path>
                                <path d="M16 6H4c-.3 0-.6.2-.6.6v.7c0 .4.3.7.6.7h.4l1.7 11.1c0 .5.4.8.8.9h6.2c.5 0 .8-.4.8-.9L15.6 8h.4c.4 0 .6-.3.6-.6v-.8c0-.4-.3-.6-.6-.6zm-1.5 3c-.1 0-.1 0 0 0H5.6l-.2-1h9.2l-.1 1z"></path>
                            </svg>
                        </span>
                    </a>
                    <a class="navigation__button navigation-button" href="/znajdz-sklep" title="">
                        <span class="navigation-button__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20">
                                <title>Lokalizacja</title>
                                <path d="M10,0C5.9,0,2.5,3.4,2.5,7.5c0,3.3,4.8,9.7,6.7,12.1c0.4,0.5,1.1,0.5,1.6,0c1.9-2.4,6.7-8.8,6.7-12.1C17.4,3.4,14.1,0,10,0z
		M12.4,6.8c-0.2,0.9-0.9,1.6-1.9,1.9C8.7,9.1,7,7.4,7.5,5.6c0.2-0.9,0.9-1.6,1.9-1.9C11.2,3.2,12.9,4.9,12.4,6.8z"></path>
                            </svg>
                        </span>
                    </a>
                    <a class="navigation__button navigation-button" href="/aplikacja-zappka" title="">
                        <span class="navigation-button__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 153.07 153.07">
                                <title>Aplikacja</title>
                                <circle cx="76.54" cy="76.54" r="76.54" fill="#0d6534"></circle>
                                <path fill="#fff" fill-rule="evenodd" d="M76.86 128.25a73.94 73.94 0 0 0 44.46-14.8l-1.73-9.26a82.25 82.25 0 0 1-85.46 0l-1.73 9.25a73.89 73.89 0 0 0 44.46 14.81z" transform="translate(-.32 .43)"></path>
                                <path fill="#fff" d="M71.19 27.94c0-4.91 3.81-8.07 8.5-8.07 4.9 0 8.71 3.16 8.71 8.07s-3.81 7.84-8.71 7.84c-4.69 0-8.5-3.05-8.5-7.84" class="cls-3" transform="translate(-.32 .43)"></path>
                                <path fill="#fff" d="M101.68 42.81L77.52 82.5h24.16v13.92h-47.4v-1.84l24.51-40.27H56.01V40.97h45.67v1.84z" class="cls-3"></path>
                            </svg>
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</nav>

<div class="page">
    <main>        
        <article class="content px-4">               
            @if("disabilitato" != "Login")
            {                
                @Body                
            }
            else
            {
                <div class="hub page-teaser">
                    <div class="container section__container">
                        <div class="hub__header hub-single__header"></div>
                        <div class="grid -tight">
                            <div class="grid__col -col-md-5 -col-lg-6" data-parallax="" data-parallax-distance="200" style="transform: translate3d(0px, 90.8834px, 0px);">
                                <div class="hub-single__bg-wrapper">
                                    <div class="hub__bg hub-single__bg page-teaser__img" style="background-image: url('https://media.zabka.pl/hub_single_bg/v5/uploads/media/60f6ad5e84427/zabka-caffe-2.jpg');"></div>
                                </div>
                            </div>
                            <div class="grid__col -off-md-1 -col-md-6 -col-lg-5">
                                <div class="hub__inner hub-single__inner page-teaser__content -header">
                                    <h2 class="title -h2">
                                        User not logged.
                                    </h2>
                                    <p class="text">
                                        Please login with your store account credentials
                                    </p>
                                    <span class="-hide -show-md">

                                        <a href="/login" class="button -block -block-sm-reset">
                                            Login
                                            <span class="icon button__icon -right">
                                                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                                            </span>
                                        </a>
                                    </span>
                                </div>
                            </div>
                            <div class="grid__col -hide-md">
                                <div class="hub__inner hub-single__inner -footer">

                                    <a href="https://www.zabka.pl/wygodne-uslugi/zagraj-w-lotto" class="button -block -block-sm-reset">
                                        Dowiedz się więcej
                                        <span class="icon button__icon -right">
                                            <svg><use xlink:href="#icon-arrow-right"></use></svg>
                                        </span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }            
        </article>
    </main>
</div>

@code
{
    public class UserMessage
    {
        public String? userDetails { get; set; }
        public List<string> userRoles { get; set; }
    }
    // private string text;

    private string output = "";
    private string loginLogut = "";
    private bool operationIsCompleted = false;
    Request current;



    protected async override Task OnParametersSetAsync()
    {
        current = await sessionStorage.GetItemAsync<Request>("request");

        if (current != null && current.Completed)
            operationIsCompleted = true;
        
        try
        {
            var a = await JS.InvokeAsync<UserMessage>("getUserInfo");
            if (a != null)
            {
                output = a.userDetails;
                loginLogut = "/logout";
            }
            else
            {
                output = "Login";
                loginLogut = "/login";
            }
        }
        catch
        {
        }
      
        return;
    }

}